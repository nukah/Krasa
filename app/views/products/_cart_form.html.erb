  <% if product_price(@product) && @product.variants.empty? %>
      <p class="prices">
        <%= t("price") %>
        <span class="price selling"><%= product_price(@product) %></span>
      </p>
  <% end %>
 
  <p class="stock">
	<span><%= t("stock") %>:</span> <strong><%= @product.has_stock? ? t('in_stock') : t('out_of_stock') %></strong>
  </p>

<div id='product_variants'>
	<%= content_tag :span, t('variants') %>
	<% if @product.has_variants? %>
			<% @product.variants.active.each_with_index do |v,i| %>
				<% next if v.option_values.empty? || (!v.in_stock && !Spree::Config[:show_zero_stock_products]) %>
				<%= form_for :order, :url => populate_orders_url do %>
				<div id='product_variant'>
					<p id='product_options'><%= v.options_text %></p>
					<p id='product_price'><%= t('price') %>: <strong><%= product_price(v) %></strong></p>
					<p id='product_stock'><%= t('stock')%>: <strong id='<%= v.in_stock ? 'in_stock' : 'out_of_stock' %>'><%= v.in_stock ? t('in_stock') : t('out_of_stock') %></strong></p>
					<%= image_submit_tag('layout/add_to_bag.png', :disabled => !v.in_stock && !Spree::Config[:allow_backorders], :id => 'product_add') %>
					<%= hidden_field_tag("products[#{@product.id}]", v.id) %>
					<%= hidden_field_tag("quantity", 1) %>
				</div>
				<% end %>
			<% end %>
	<% else %>
		<%= form_for :order, :url => populate_orders_url do %>
			<%= image_submit_tag('layout/add_to_bag.png', :disabled => !v.in_stock && !Spree::Config[:allow_backorders], :id => 'product_add') %>
			<%= hidden_field_tag("products[#{@product.id}]", v.id) %>
			<%= hidden_field_tag("quantity", 1) %>
		<% end %>
	<% end %>
</div>


<% content_for :head do %>
  <%= javascript_include_tag 'product' %>
<% end %>
